restart_home_assistant:
  alias: Restart Home Assistant
  sequence:
    service: homeassistant.restart
rewind_living_room_tv:
  alias: Rewind Living Room TV
  sequence:
  - condition: template
    value_template: '{{ "media_position" in states.media_player.living_room_tv.attributes
      }}'
  - service: media_player.media_seek
    entity_id: media_player.living_room_tv
    data_template:
      seek_position: "{% set pos = states.media_player.living_room_tv.attributes.media_position\
        \ %} {{ (pos-30, 0)|max }}  \n"
fast_forward_living_room_tv:
  alias: Fast Forward Living Room TV
  sequence:
  - condition: template
    value_template: '{{ "media_position" in states.media_player.living_room_tv.attributes
      and "media_duration" in states.media_player.living_room_tv.attributes}}'
  - service: media_player.media_seek
    entity_id: media_player.living_room_tv
    data_template:
      seek_position: "{% set pos = states.media_player.living_room_tv.attributes.media_position\
        \ %} {% set end = states.media_player.living_room_tv.attributes.media_duration\
        \ %} {{ (pos+30, end)|min }}   \n"
notify_patrick:
  alias: Notify Patrick
  sequence:
  - data:
      Message: Hello from HA
    data_template:
      message: Home Assistant says hi
    service: notify.pushbullet
notify_lg_tv_call:
  alias: Notify LG TV call
  sequence:
  - service: notify.lg_tv
    data_template:
      message: '{{message}}'
      data:
        icon: /config/www/images/phone.png
notify_lg_tv_cam:
  alias: Notify LG TV cam
  sequence:
  - service: notify.lg_tv
    data:
      message: Motion detected on front porch
      data:
        icon: /config/www/images/snapshot_cam_2.jpg
notify_liz_phone_cam:
  alias: Notify Liz Phone cam
  sequence:
  - data_template:
      data:
        attachment:
          hide-thumbnail: false
          url: https://h-a.twosquaredlove.duckdns.org/local/images/snapshot_cam_2.jpg?{{now().strftime("%s")}}.jpg
      title: Motion detected on front porch
      message: '{{message}}'
    service: notify.mobile_app_iphone
notify_pushbullet_cam:
  alias: Notify Pushbullet cam
  sequence:
  - data_template:
      data:
        file_url: https://h-a.twosquaredlove.duckdns.org/local/images/snapshot_cam_2.jpg?{{now().strftime("%s")}}.jpg
      message: '{{message}}'
      title: Motion detected on front porch
    service: notify.pushbullet
cam_2_motion_detected_notifications:
  alias: Cam 2 motion detected notifications
  sequence:
  - service: script.notify_lg_tv_cam
  - service: script.notify_liz_phone_cam
    data_template:
      message: '{{timestamp}}'
  - service: script.notify_pushbullet_cam
    data_template:
      message: '{{timestamp}}'
talk:
  alias: TTS Example
  sequence:
  - service: tts.google_say
    entity_id: media_player.living_room_speaker
    data:
      message: Hello Liz
cam_2_snapshot:
  alias: Cam 2 snapshot
  sequence:
  - data: {}
    service: shell_command.cam_2_snapshot
